# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Weather SDK

## üìê –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

Weather SDK –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö SOLID –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –≥–∏–±–∫–æ—Å—Ç–∏, —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç–∏ –∏ —É–¥–æ–±—Å—Ç–≤–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

## üèõÔ∏è –ö–ª—é—á–µ–≤—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. Factory Pattern (WeatherSDKFactory)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ SDK.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ API –∫–ª—é—á–∞
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**:
```java
public class WeatherSDKFactory {
    private static final Map<String, WeatherSDK> instances = new ConcurrentHashMap<>();
    
    public static WeatherSDK getInstance(String apiKey, SDKMode mode) {
        // –ê—Ç–æ–º–∞—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ
        return instances.computeIfAbsent(apiKey, key -> new WeatherSDK(key, mode));
    }
}
```

### 2. Strategy Pattern (SDKMode)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.

**–†–µ–∂–∏–º—ã**:
- **ON_DEMAND**: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ –∑–∞–ø—Ä–æ—Å—É
- **POLLING**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Ä–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã
- –ò–∑–æ–ª—è—Ü–∏—è –ª–æ–≥–∏–∫–∏ –∫–∞–∂–¥–æ–≥–æ —Ä–µ–∂–∏–º–∞
- –í—ã–±–æ—Ä —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

### 3. Cache Pattern (WeatherCache)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ —Å–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ API.

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- LRU (Least Recently Used) —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –≤—ã—Ç–µ—Å–Ω–µ–Ω–∏—è
- TTL (Time To Live) 10 –º–∏–Ω—É—Ç
- –ú–∞–∫—Å–∏–º—É–º 10 —ç–ª–µ–º–µ–Ω—Ç–æ–≤

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**:
```java
public class WeatherCache {
    private final Map<String, CacheEntry> cache = new LinkedHashMap<>(10, 0.75f, true) {
        @Override
        protected boolean removeEldestEntry(Map.Entry<String, CacheEntry> eldest) {
            return size() > MAX_CACHE_SIZE;
        }
    };
}
```

## üß© –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### 1. WeatherSDK (–û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å)

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å**:
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—ç—à–µ–º –∏ —Ä–µ–∂–∏–º–æ–º —Ä–∞–±–æ—Ç—ã
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø—É–±–ª–∏—á–Ω–æ–≥–æ API

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã**:
- `getWeather(String cityName)`: –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–≥–æ–¥—ã
- `clearCache()`: –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞
- `close()`: –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤

### 2. WeatherSDKFactory (–§–∞–±—Ä–∏–∫–∞)

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å**:
- –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏ SDK
- –û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

**Thread-safety**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `ConcurrentHashMap`

### 3. WeatherApiClient (HTTP –ö–ª–∏–µ–Ω—Ç)

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å**:
- –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å OpenWeatherMap API
- –û–±—Ä–∞–±–æ—Ç–∫–∞ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤
- –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ JSON –≤ –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**:
- `java.net.http.HttpClient` (Java 11+)
- Gson –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON

### 4. WeatherCache (–ö—ç—à)

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å**:
- –•—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–≥–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ TTL –∑–∞–ø–∏—Å–µ–π
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è LRU —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

**Thread-safety**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `ReadWriteLock`

### 5. Model (–ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞**:
```
WeatherData
‚îú‚îÄ‚îÄ Weather (main, description)
‚îú‚îÄ‚îÄ Temperature (temp, feels_like)
‚îú‚îÄ‚îÄ Wind (speed)
‚îî‚îÄ‚îÄ Sys (sunrise, sunset)
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- POJO –∫–ª–∞—Å—Å—ã —Å –≥–µ—Ç—Ç–µ—Ä–∞–º–∏/—Å–µ—Ç—Ç–µ—Ä–∞–º–∏
- –ê–Ω–Ω–æ—Ç–∞—Ü–∏–∏ Gson –¥–ª—è –º–∞–ø–ø–∏–Ω–≥–∞ JSON
- –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –ö–µ–ª—å–≤–∏–Ω ‚Üí –¶–µ–ª—å—Å–∏–π)

### 6. Exception (–ò–µ—Ä–∞—Ä—Ö–∏—è –∏—Å–∫–ª—é—á–µ–Ω–∏–π)

```
WeatherSDKException
‚îú‚îÄ‚îÄ ApiKeyException
‚îú‚îÄ‚îÄ CityNotFoundException
‚îî‚îÄ‚îÄ NetworkException
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –¢–æ—á–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫
- –£–¥–æ–±–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫
- –°–æ–¥–µ—Ä–∂–∞—Ç–µ–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

## üîÑ –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö

### –†–µ–∂–∏–º ON_DEMAND

```
User Request
    ‚Üì
getWeather(city)
    ‚Üì
Check Cache
    ‚Üì
Cache Hit? ‚îÄYES‚Üí Return from Cache
    ‚Üì NO
API Request
    ‚Üì
Parse Response
    ‚Üì
Update Cache
    ‚Üì
Return Data
```

### –†–µ–∂–∏–º POLLING

```
Initialization
    ‚Üì
Start Polling Thread
    ‚Üì
Every 5 minutes:
    ‚Üì
For each city in cache:
    ‚Üì
    API Request
    ‚Üì
    Update Cache

User Request
    ‚Üì
getWeather(city)
    ‚Üì
Check Cache
    ‚Üì
Cache Hit? ‚îÄYES‚Üí Return from Cache
    ‚Üì NO
API Request (first time)
    ‚Üì
Update Cache
    ‚Üì
Return Data
```

## üîí –ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å

### Thread-Safety –≥–∞—Ä–∞–Ω—Ç–∏–∏

1. **WeatherSDKFactory**
   - `ConcurrentHashMap` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤
   - –ê—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ `computeIfAbsent()`

2. **WeatherCache**
   - `ReadWriteLock` –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
   - –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —á—Ç–µ–Ω–∏–µ, —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω–∞—è –∑–∞–ø–∏—Å—å

3. **Polling Thread**
   - –î–µ–º–æ–Ω-–ø–æ—Ç–æ–∫ (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
   - Graceful shutdown –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ SDK

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Lock'–æ–≤

```java
public WeatherData get(String cityName) {
    lock.readLock().lock();
    try {
        CacheEntry entry = cache.get(cityName);
        // ... –ª–æ–≥–∏–∫–∞
    } finally {
        lock.readLock().unlock();
    }
}

public void put(String cityName, WeatherData data) {
    lock.writeLock().lock();
    try {
        cache.put(cityName, new CacheEntry(data, System.currentTimeMillis()));
    } finally {
        lock.writeLock().unlock();
    }
}
```

## üìä –î–∏–∞–≥—Ä–∞–º–º–∞ –∫–ª–∞—Å—Å–æ–≤

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ WeatherSDKFactory   ‚îÇ
‚îÇ (Singleton pattern) ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ creates
           ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    WeatherSDK       ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  - apiKey           ‚îÇ           ‚îÇ
‚îÇ  - mode             ‚îÇ           ‚îÇ
‚îÇ  - apiClient        ‚îÇ           ‚îÇ
‚îÇ  - cache            ‚îÇ           ‚îÇ
‚îÇ  - pollingExecutor  ‚îÇ           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îÇ
           ‚îÇ                      ‚îÇ
           ‚îÇ uses                 ‚îÇ
           ‚Üì                      ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
‚îÇ WeatherApiClient    ‚îÇ          ‚îÇ
‚îÇ  - apiKey           ‚îÇ          ‚îÇ
‚îÇ  - httpClient       ‚îÇ          ‚îÇ
‚îÇ  + fetchWeather()   ‚îÇ          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
                                 ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
‚îÇ   WeatherCache      ‚îÇ          ‚îÇ
‚îÇ  - cache (LRU)      ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ  - lock             ‚îÇ
‚îÇ  + get()            ‚îÇ
‚îÇ  + put()            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üéØ –ü—Ä–∏–Ω—Ü–∏–ø—ã SOLID

### Single Responsibility Principle (SRP)
- `WeatherSDK`: –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- `WeatherApiClient`: –¢–æ–ª—å–∫–æ HTTP –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ
- `WeatherCache`: –¢–æ–ª—å–∫–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- `WeatherSDKFactory`: –¢–æ–ª—å–∫–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º

### Open/Closed Principle (OCP)
- –ù–æ–≤—ã–µ —Ä–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ enum `SDKMode`
- –ù–æ–≤—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å —á–µ—Ä–µ–∑ –º–æ–¥–µ–ª–∏
- –†–∞—Å—à–∏—Ä—è–µ–º–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è –∏—Å–∫–ª—é—á–µ–Ω–∏–π

### Liskov Substitution Principle (LSP)
- –í—Å–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –Ω–∞—Å–ª–µ–¥—É—é—Ç—Å—è –æ—Ç `WeatherSDKException`
- –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö —Å–ª–µ–¥—É—é—Ç –µ–¥–∏–Ω–æ–º—É –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É

### Interface Segregation Principle (ISP)
- SDK –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π, –Ω–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π API
- –ö–ª–∏–µ–Ω—Ç –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–µ–Ω—É–∂–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤

### Dependency Inversion Principle (DIP)
- SDK –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, enum), –∞ –Ω–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π
- –õ–µ–≥–∫–æ –∑–∞–º–µ–Ω–∏—Ç—å HTTP –∫–ª–∏–µ–Ω—Ç –∏–ª–∏ –∫—ç—à –Ω–∞ –¥—Ä—É–≥—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é

## üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

1. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –°–Ω–∏–∂–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API
   - –£–º–µ–Ω—å—à–∞–µ—Ç –∑–∞–¥–µ—Ä–∂–∫—É –æ—Ç–≤–µ—Ç–∞

2. **LRU —Å—Ç—Ä–∞—Ç–µ–≥–∏—è**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é
   - –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–≥–æ –∫—ç—à–∞

3. **ReadWriteLock**
   - –ü–æ–∑–≤–æ–ª—è–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ —á—Ç–µ–Ω–∏–µ
   - –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∑–∞–ø–∏—Å–∏

4. **Connection Pooling**
   - HttpClient –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
   - –°–æ–∫—Ä–∞—â–∞–µ—Ç –≤—Ä–µ–º—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

### –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

| –û–ø–µ—Ä–∞—Ü–∏—è | ON_DEMAND (–ø–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å) | ON_DEMAND (–∏–∑ –∫—ç—à–∞) | POLLING |
|----------|---------------------------|---------------------|---------|
| –ó–∞–ø—Ä–æ—Å | 200-500ms | <1ms | <1ms |
| –ü–∞–º—è—Ç—å | ~10KB –Ω–∞ –≥–æ—Ä–æ–¥ | ~10KB –Ω–∞ –≥–æ—Ä–æ–¥ | ~10KB –Ω–∞ –≥–æ—Ä–æ–¥ |
| CPU | –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ | –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ | –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ + —Ñ–æ–Ω–æ–≤—ã–π –ø–æ—Ç–æ–∫ |

## üîß –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å

### –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã

1. –î–æ–±–∞–≤—å –∑–Ω–∞—á–µ–Ω–∏–µ –≤ `SDKMode`:
```java
public enum SDKMode {
    ON_DEMAND,
    POLLING,
    AGGRESSIVE_CACHING  // –Ω–æ–≤—ã–π —Ä–µ–∂–∏–º
}
```

2. –î–æ–±–∞–≤—å –ª–æ–≥–∏–∫—É –≤ `WeatherSDK`:
```java
if (mode == SDKMode.AGGRESSIVE_CACHING) {
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞
}
```

### –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –ø–æ–ª—è –¥–∞–Ω–Ω—ã—Ö

1. –î–æ–±–∞–≤—å –ø–æ–ª–µ –≤ –º–æ–¥–µ–ª—å:
```java
public class WeatherData {
    private Humidity humidity;  // –Ω–æ–≤–æ–µ –ø–æ–ª–µ
    
    public Humidity getHumidity() {
        return humidity;
    }
}
```

2. –û–±–Ω–æ–≤–∏ –ø–∞—Ä—Å–∏–Ω–≥ –≤ `WeatherApiClient`:
```java
Humidity humidity = new Humidity(root.get("humidity").getAsInt());
weatherData.setHumidity(humidity);
```

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤–∏—Ç–∏—é

### –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π API**
   - CompletableFuture –¥–ª—è –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
   - Reactive Streams –¥–ª—è –ø–æ—Ç–æ–∫–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

2. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º–æ—Å—Ç—å**
   - –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π TTL –∫—ç—à–∞
   - –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π —Ä–∞–∑–º–µ—Ä –∫—ç—à–∞
   - –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª polling

3. **–ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
   - –°—á–µ—Ç—á–∏–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
   - –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞
   - Hit rate –∫—ç—à–∞

4. **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–π –∫—ç—à**
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫—ç—à–∞ –Ω–∞ –¥–∏—Å–∫
   - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞

5. **Batch –∑–∞–ø—Ä–æ—Å—ã**
   - –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–≥–æ–¥—ã –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≥–æ—Ä–æ–¥–æ–≤ –∑–∞ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å

6. **Retry –ª–æ–≥–∏–∫–∞**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–∏ —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–∫–∞—Ö
   - Exponential backoff

---

–î–æ–∫—É–º–µ–Ω—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω —Å ‚ù§Ô∏è –¥–ª—è –∫–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
